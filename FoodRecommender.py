import tkinter as tk
from tkinter import messagebox
import random
import json
import os

# 数据文件路径
DATA_FILE = "food_data.json"

# 初始数据
def initialize_data():
    """初始化数据文件，若不存在则创建并写入初始数据"""
    initial_data = {
        "中餐": {
        "饭": ["蛋炒饭", "猪脚饭", "黄焖鸡米饭", "煲仔饭", "咖喱饭",
               "腊味饭", "黑椒牛肉饭", "鱼香肉丝饭", "红烧排骨饭", "香菇滑鸡饭",
               "东坡肉饭", "麻辣鸡腿饭", "卤肉饭", "菠萝咕咾肉饭", "咸鱼鸡粒饭",
               "照烧鸡肉饭", "腊肠饭", "鸡排饭", "梅菜扣肉饭", "三杯鸡饭",
               "鳗鱼饭", "石锅拌饭", "牛肉饭", "鸡肉饭", "叉烧饭",
               "烧鸭饭", "烤肉饭", "海鲜饭", "章鱼饭", "南瓜饭",
               "豆角焖饭", "田螺焖饭", "萝卜焖饭", "八宝饭", "菌菇饭",
               "紫薯饭", "西红柿炒蛋饭", "芋头焖饭", "腊鸭饭", "竹笋焖饭",
               "香菇腊肉饭", "土豆牛肉饭", "洋葱炒蛋饭", "咖喱猪排饭", "金针菇培根饭",
               "芹菜肉丝饭", "杏鲍菇鸡肉饭", "蒜香排骨饭", "豆腐煲饭", "荷叶鸡饭"],
       
        "面": ["牛肉拉面", "红烧牛肉面", "番茄鸡蛋面", "炸酱面", "重庆小面",
               "刀削面", "阳春面", "海鲜汤面", "葱油拌面", "臊子面",
               "担担面", "酸菜鱼面", "肥肠面", "排骨面", "双椒炒面",
               "油泼面", "鸡丝凉面", "羊肉汤面", "香菇鸡丝面", "豌杂面",
               "菌菇汤面", "黄鱼面", "香辣牛肉面", "乌冬面", "虾仁面",
               "韩式炸酱面", "炒刀削面", "三鲜面", "老北京炸酱面", "辣酱拌面",
               "豚骨拉面", "龙须面", "芹菜肉丝面", "冬阴功汤面", "番茄牛腩面",
               "黑椒牛柳面", "咖喱鸡肉面", "意式海鲜面", "虾酱拌面", "茶树菇炖鸡面",
               "笋干排骨面", "南瓜汤面", "酸辣海鲜面", "五香牛肉面", "红油凉面", 
               "鸡蛋挂面", "金针菇肥牛面", "热干面", "安徽板面", "炒面", "陕西烩面", 
               "兰州拉面", "豫州烩面"],
       
        "粉": ["桂林米粉", "螺蛳粉", "老友粉", "酸辣粉", "云南过桥米线",
               "三丝米线", "牛腩米粉", "沙县拌米粉", "豌杂米粉", "香菇牛肉米粉",
               "泡椒米粉", "豚骨汤米线", "青菜米粉", "火腿炒米粉", "牛骨汤米粉",
               "麻辣米粉", "干捞米粉", "川味酸辣粉", "鲜虾米粉", "鸡丝米粉",
               "四川担担米粉", "黄花菜炒米粉", "海鲜米线", "炖牛肉米粉", "牛杂粉", 
               "香葱排骨米粉", "粉丝蒸虾", "蟹黄粉丝煲", "炸酱米粉", "茯苓米粉"],
        
        "饼": ["猪肉馅饼", "牛肉馅饼", "手抓饼", "葱油饼", "油饼", 
               "家常饼", "发面饼", "山东煎饼", "煎饼果子",
               "北京炸酱面饼", "云南鲜花饼", "广东盲公饼", 
               "新疆馕", "陕西锅盔", "蒙古馅饼",  
               "鸡蛋灌饼", "春饼", "烙饼", "玉米面贴饼子"],

        "包子": ["小笼包", "青菜包", "豆沙包", "叉烧包", "香菇包", 
                 "粉丝包", "鸡肉包", "海鲜包", "素包子", "奶黄包", 
                 "三鲜包", "韭菜包", "猪肉包", "牛肉包"],

        "饺子": ["猪肉饺子", "牛肉饺子", "素饺子", "三鲜饺子", "海鲜饺子",
                 "虾仁饺子", "韭菜饺子", "白菜饺子", "香菇饺子", "辣味饺子",
                 "酸菜饺子", "鲍汁饺子", "猪肉韭菜饺子", "猪肉大葱饺子", "山药饺子",
                 "红豆饺子", "南瓜饺子", "云吞", "抄手"],
       
        "小炒": ["爆炒生菜", "爆炒河虾", "红烧芋头", "爆炒土豆丝", "青瓜肉片饭", 
                 "鱼香肉丝盖饭", "彩椒面筋盖饭", "爆炒羊肚", "爆炒虾尾", "爆炒鸡爪", 
                 "火爆大头菜", "韭菜炒鸡蛋", "葱爆鱿鱼卷", "腐竹炒肉", "木须肉", 
                 "青椒土豆丝", "爆炒骨肉相连", "爆炒猪肝", "爆炒猪腰", "葱爆羊肉片", 
                 "大盘鸡", "爆炒牛肉片", "爆炒牛肉", "杏鲍菇牛肉酱", "酱香爆炒鲍鱼", 
                 "爆炒甜红椒", "爆炒牛蛙", "爆炒花甲", "爆炒海瓜子", "爆炒鱿鱼", 
                 "葱香鲍鱼", "腊肠炒鸡蛋", "番茄豆腐汤", "农家铁锅炖笨鸡", 
                 "爆炒皮皮虾", "杏鲍菇炒腊肉", "杏鲍菇炒肉肠", "爆炒基围虾", 
                 "爆炒章鱼", "野菜酸筒秆炒肥肠", "爆炒香辣鸭胗", "爆炒大肠", 
                 "野蘑菇揪片子", "辣炒娃娃菜", "清炒黄瓜火腿肠", "烤五花肉", 
                 "辣炒瓠子", "肉沫豇豆", "红烧花蛤", "水煮麻辣鱼", "双椒爆炒鸭板肠", 
                 "酸辣白菜", "鳕鱼胶焖香菇", "红烧黄丫头鱼", "麻辣小龙虾", 
                 "香菇猪肉杂酱", "梅菜扣肉", "爆炒萝卜丁", "啤酒香辣螺丝", 
                 "炒酸包菜", "爆炒手撕包菜", "酸菜鱼", "土豆焖鸡", "农家小炒肉", 
                 "牛肉炒芹菜", "酸辣猪心", "干锅小龙虾", "爆炒尖椒鸡肠", 
                 "减脂爆款鸡胸炒彩椒", "炒红萝卜丝", "小土豆烧肉", "红烧冬瓜", 
                 "爆炒雪菜蚕豆瓣", "萝卜炒泥丁", "爆炒西芹木耳", 
                 "苦瓜炒蛋", "红烧罗非鱼", "酸辣粉", "茄子酸菜炒牛肉", "爆炒青菜", 
                 "春韭炒虾", "青椒爆炒香螺", "酱肉炒蒜苗", "爆炒牛舌", "酸甜墨鱼", 
                 "鸡腿煲", "清炒杏鲍菇", "青菜豆腐便当", "肉沫蒸蛋", "香辣花甲", 
                 "姜爆鸽子", "爆炒青口", "黄鱼烧豆腐", "爆炒牛肉丝", "爆炒甘蓝", 
                 "爆炒卷心菜", "番茄鸡腿炖土豆", "酱爆圆白菜", "三鲜爆炒金针菇", 
                 "肉酱茄子", "小炒牛肉", "爆炒小鱿鱼", "香辣小鱼干", 
                 "爆炒花甲", "花椰菜炒肉", "炒茄子", "溜肥肠", "新疆拌面", 
                 "炝炒土豆丝", "爆炒草鱼片", "油焖大虾", "猪心腰花炒蒜苗", 
                 "孜然爆炒香菇", "红烧冬瓜排骨", "咸蛋黄梭子蟹", "鱿鱼木耳炒黄瓜", 
                 "荷兰豆炒牛肉", "豉油皇吹筒", "香辣芋儿鸡", "慕实好爆肚", "炒猪舌", 
                 "响油鳝丝", "鸡心炒蒜苔", "蒜姜吮指大虾", "辣炒蛤蜊", "清炒虾仁", 
                 "素炒豇豆", "鲜豆角炖肉", "红烧黄鳝", "黑椒牛肉杏鲍菇", 
                 "爆炒白玉蜗牛", "金针菇炒辣椒肉片", "番茄糖醋排骨", "油汤茄子", 
                 "香菇油菜", "牛腩萝卜汤汁饭", "爆炒鸡胗", "红烧香菇鸡块", 
                 "香辣牛肉干", "蒜苗炒猪肝", "麻辣九转大肠", "鲍汁虾", "芥兰螺蛳", 
                 "双椒炒春笋", "秋葵腰果", "手撕包心菜", "孜然羊肉烤馕", "爆炒猪利", 
                 "番茄土豆疙瘩汤", "香辣蟹", "豆角肉包", "油焖小龙虾", 
                 "苕粉皮炒蚕豆", "干锅腊肉包菜", "蒜苔炒猪肝", "香菜蚕豆瓣", 
                 "酸辣手撕包菜", "腊肉干煸豆角", "十三香麻辣小龙虾", "爆炒大肠", 
                 "香菇蒸鹌鹑蛋", "肝腰和烹", "土匪猪肝", "红烧小鲍鱼", 
                 "猪油炒长油方包菜", "爆炒水发鱿鱼", "爆炒蝴蝶面", 
                 "爆炒青虾", "爆炒猪腰", "爆炒猪舌", "爆炒腰花", "爆炒鸭胗", 
                 "大葱爆炒猪肝", "爆炒肥肠", "爆炒辣子鸡", "爆炒麻辣花蛤", 
                 "爆炒鱿鱼须", "鱿鱼爆炒韭菜"],
       
        "蒸菜": ["清蒸鱼", "蒸蛋羹", "蒸南瓜", "蒸玉米", 
                 "蒸红薯", "蒸山药", "蒸芋头", "蒸排骨", 
                 "蒸鸡翅", "蒸肉饼", "蒸丸子", "蒸千张肉卷", 
                 "蒸粉丝虾", "蒸娃娃菜", "蒸西兰花", "蒸苦瓜", 
                 "蒸冬瓜", "蒸豆腐", "蒸鲍鱼", "蒸螃蟹", "蒸龙虾"],
        
         "煲汤": ["猪骨汤", "鸡汤", "排骨汤", "羊肉汤", "牛肉汤", 
                 "鸽子汤", "乌鸡汤", "番茄蛋花汤", "玉米排骨汤", "冬瓜排骨汤", 
                 "萝卜羊肉汤", "山药排骨汤", "莲藕排骨汤", "番茄牛腩汤", "香菇鸡汤", 
                 "虫草花鸡汤", "海带排骨汤", "玉米胡萝卜猪骨汤", "菌菇鸡汤", "番茄蛋汤", 
                 "紫菜蛋花汤", "花旗参炖鸡汤", "虫草炖瘦肉汤", "雪梨银耳汤", "虫草花炖瘦肉汤", 
                 "木瓜雪耳汤", "淮山枸杞炖鸡", "海底椰炖瘦肉汤", "虫草花炖鸡汤", "花旗参炖排骨汤", 
                 "花菇炖鸡汤", "虫草花炖排骨汤", "雪梨炖瘦肉汤", "花旗参炖瘦肉汤", "虫草花炖牛腩汤", 
                 "苦瓜排骨汤", "苦瓜黄豆汤", "苦瓜豆腐汤", "苦瓜蛋汤", "苦瓜苹果蜜枣汤", "苦瓜三鲜汤", 
                 "苦瓜牡蛎汤", "苦瓜火腿汤", "苦瓜绿豆汤", "苦瓜白蛤汤", "苦瓜香菇汤", "苦瓜菠萝汤", 
                 "苦瓜无花果番薯汤"],
       
        "火锅": ["麻辣火锅", "清汤火锅", "番茄火锅", "菌汤火锅", "粥底火锅", 
                 "牛油火锅", "羊肉火锅", "牛肉火锅", "海鲜火锅", "鸳鸯火锅", 
                 "椰子鸡火锅", "猪肚鸡火锅", "火锅鸡", "火锅鸭", "串串香火锅", 
                 "豆捞火锅", "小肥羊火锅", "海底捞火锅", "潮汕牛肉火锅", "重庆火锅", 
                 "北京铜锅涮肉", "云南菌菇火锅", "韩式部队火锅", "日式寿喜烧火锅", 
                 "麻辣烫火锅", "港式打边炉火锅", "菊花暖锅", "本地鸡窝火锅", "罗田吊锅", 
                 "鱼杂火锅", "腊肉火锅", "锄烧火锅", "相扑火锅", "内脏锅", "石头火锅", 
                 "韩国泡菜火锅", "瑞士火锅", "巧克力火锅", "泰国火锅", "酸汤鱼火锅"],
       
        "烧烤": ["烤羊肉串", "烤鸡翅", "烤玉米", "烤茄子", "烤韭菜", 
                 "烤鸡爪", "烤五花肉", "烤鱿鱼", "烤生蚝", "烤扇贝", 
                 "烤牛排", "烤牛肉", "烤香肠", "烤年糕", "烤馒头片", 
                 "烤土豆片", "烤红薯", "烤花菜", "烤金针菇", "烤豆皮", 
                 "烤鸡心", "烤鸡肝", "烤鸡胗", "烤猪蹄", "烤猪皮", "烤鱼", 
                 "烤鸡腿", "烤羊排", "烤羊腿", "烤鸭脖", "烤牛油果", "烤豆腐", 
                 "烤藕片", "烤青椒", "烤蒜瓣", "烤馒头干", "烤火腿", "烤培根", 
                 "烤牛蛙", "烤牛肚", "烤猪大肠", "烤猪耳朵", "烤猪尾巴", "烤羊腰", 
                 "烤羊肚", "烤羊头", "烤羊蹄", "烤鸡骨", "烤鸭头", "烤鸭掌", 
                 "烤鸭舌", "烤虾", "烤蟹", "烤鱼豆腐", "烤鱼丸", "烤贡丸", 
                 "烤玉米饼", "烤年糕串", "烤芝士", "烤馒头夹肉", "烤鱼豆腐串", 
                 "烤肉脯", "烤海带", "烤海白菜", "烤海参", "烤海胆", "烤蛤蜊", 
                 "烤章鱼小丸子", "烤鱼籽", "烤鱼肠", "烤鱼皮", "烤鱼头", "烤鱼尾", 
                 "烤鱼骨", "烤鱼鳞", "烤鱼肝", "烤鱼泡", "烤鱼白", "烤鱼翅", "烤鱼唇"],
       
        "炸物": ["油条", "炸鸡翅", "炸薯条", "炸鸡腿", "炸春卷", 
                 "炸油饼", "炸麻花", "炸年糕", "炸丸子", "炸鸡米花", 
                 "炸鱼", "炸虾", "炸排骨", "炸鸡排", "炸鱿鱼圈", 
                 "炸藕盒", "炸茄盒", "炸豆腐", "炸香蕉", "炸苹果", 
                 "炸洋葱圈", "炸花生米", "炸土豆片", "炸山药", "炸南瓜", 
                 "炸紫薯", "炸鸡爪", "炸鸡心", "炸鸡肝", "炸鸡胗", 
                 "炸鸡腿菇", "炸香菇", "炸面窝"]
    },
    "西餐": {
        "披萨": ["榴莲披萨","奶香芝士披萨","意式慢炖手撕牛肉披萨","金沙咸蛋黄嫩鸡披萨",
                 "德克萨斯风味烤肉披萨","超级至尊披萨","新奥尔良烤鸡肉披萨",
                 "经典苏丹王榴莲比萨","奥尔良烤鸡比萨","水果什锦比萨","双拼比萨",
                 "金沙咸蛋黄比萨","经典意式肉酱比萨","安格斯黑金牛肉比萨",
                 "车打芝士酱香肠火腿比萨","西班牙风情香肠肉酱披萨","大块罗非鱼披萨",
                 "和牛芝香菌菇披萨","美国风情土豆培根披萨","照烧风味牛肉土豆披萨"],
        
        "牛排": ["菲力牛排", "肉眼牛排", "西冷牛排", "T骨牛排", 
                 "战斧牛排", "牛小排", "上脑牛排", "板腱牛排", "惠灵顿牛排", 
                 "肋眼牛排", "老饕牛排", "牛柳牛排", "安格斯牛排", "和牛牛排"],
        
        "三明治": ["培根三明治", "薯条三明治", "鸡蛋水芹三明治", "西班牙土豆煎蛋三明治", 
                   "西班牙开放式三明治", "法式火腿芝士三明治", "法式蔬菜金枪鱼三明治", 
                   "法式火腿黄油三明治", "葡萄牙肉酱三明治", "波兰蘑菇奶酪三明治", 
                   "培根鸡蛋奶酪三明治", "BLT三明治（培根生菜番茄三明治）", 
                   "费城芝士牛排三明治", "龙虾卷", "穷汉三明治", 
                   "熏牛肉配黑面包三明治", "肉丸三明治", "古巴夜宵三明治", 
                   "秘鲁火腿三明治", "委内瑞拉烤牛排三明治", "智利牛排蔬菜三明治", 
                   "智利热狗三明治", "玻利维亚香肠三明治", "玻利维亚鸡蛋牛排三明治", 
                   "特立尼达鲨鱼肉三明治", "以色列烤蛋plant三明治"],
        
        "意面": ["意式肉酱面", "番茄鸡蛋面", "奶油培根意面", "黑椒牛柳意面", 
                 "海鲜意面", "蒜香虾仁意面", "奶油蘑菇意面", "番茄罗勒意面", 
                 "青酱意面", "奶油培根蘑菇意面", "番茄鸡肉意面", "奶油南瓜意面", 
                 "黑松露意面", "红烧牛肉意面", "番茄海鲜意面", "奶油芝士意面", 
                 "番茄肉丸意面", "黑椒鸡肉意面", "奶油菠菜意面", "番茄洋葱意面", 
                 "奶油培根芦笋意面"],
       
        "炖菜": ["匈牙利烩牛肉", "西班牙陶锅炖菜", "普罗旺斯炖菜", 
                 "西式奶油炖菜", "西班牙海鲜炖饭", "法式红酒炖牛肉", 
                 "意大利肉酱炖菜", "奶油蘑菇炖鸡", "香草炖羊肉", 
                 "番茄炖牛腩", "奶油南瓜炖菜", "法式洋葱炖牛肉", 
                 "西班牙土豆炖肉", "意大利蔬菜炖鸡", "奶油玉米炖肉", 
                 "香料炖牛肉", "西班牙海鲜烩菜", "英式牛肉炖菜", 
                 "俄式红菜汤炖牛肉", "美式烤肉炖菜"],
       
        "沙拉": ["凯撒沙拉", "希腊沙拉", "水果沙拉", "蔬菜沙拉", 
                 "鸡肉沙拉", "三文鱼沙拉", "虾仁沙拉", "藜麦沙拉", 
                 "牛油果沙拉", "土豆沙拉", "金枪鱼沙拉", "玉米沙拉", 
                 "南瓜沙拉", "紫甘蓝沙拉", "芝麻菜沙拉", "甜菜根沙拉", 
                 "黄瓜沙拉", "胡萝卜沙拉", "西兰花沙拉", "生菜沙拉"],
        
        "汤": ["番茄汤", "南瓜汤", "土豆汤", "洋葱汤", "蘑菇汤", 
               "海鲜汤", "鸡肉汤", "牛肉汤", "蔬菜汤", "罗宋汤", 
               "奶油玉米汤", "奶油南瓜汤", "奶油蘑菇汤", "法式洋葱汤", 
               "西班牙海鲜汤", "意大利蔬菜汤", "美式玉米浓汤", "英式青豆汤", 
               "俄式红菜汤", "法式海鲜汤"],
      
        "甜点": ["巧克力蛋糕", "提拉米苏", "法式焦糖炖蛋", "马卡龙", 
                 "法式可颂", "黑森林樱桃蛋糕", "慕斯蛋糕", "法式奶油泡芙", 
                 "意式奶冻", "英式司康", "法式千层酥", "巧克力布朗尼", 
                 "纽约芝士蛋糕", "法式水果挞", "意式冰淇淋", "焦糖布丁", 
                 "法式杏仁马卡龙", "英式果酱挞", "德式苹果派", "美式蓝莓派", 
                 "法式焦糖烤梨", "意式蜂蜜杏仁蛋糕", "美式红丝绒蛋糕"],
      
        "烤物": ["烤鸡","烤鸭","烤牛排","烤羊排","烤猪排",
                 "烤三文鱼","烤鳕鱼","烤虾","烤鱿鱼","烤茄子",
                 "烤土豆","烤南瓜","烤玉米","烤花菜","烤西兰花",
                 "烤蘑菇","烤洋葱","烤蒜头","烤青椒","烤甜椒",
                 "烤面包片","烤法棍","烤披萨","烤乳猪","烤火鸡",
                 "烤乳鸽","烤鹌鹑","烤培根","烤香肠","烤羊腿",
                 "烤牛肋排","烤肉串","烤蔬菜拼盘"],
      
        "汉堡": ["巨无霸汉堡","麦辣鸡腿堡","板烧鸡腿堡","汉堡王皇堡",
                 "安格斯厚牛堡","培根芝士汉堡","双层芝士汉堡","火腿蛋汉堡",
                 "烤鸡腿堡","牛肉汉堡","鱼肉汉堡","素食汉堡","烤肉汉堡",
                 "辣味鸡肉汉堡","芝士培根汉堡","烤鸡排堡","墨西哥风味汉堡",
                 "意式香草汉堡","日式照烧汉堡","韩式辣味汉堡"],
     
        "炸物": ["炸鸡翅", "炸薯条", "炸洋葱圈", "炸花枝", "炸鳕鱼", 
                 "炸奶酪球", "炸蘑菇", "炸虾", "炸大虾", "炸鱿鱼圈", 
                 "炸土豆片", "炸芝士条", "炸鸡排", "炸鸡腿", "炸羊排", 
                 "炸羊腿", "炸美式炸鱼", "炸鸡肉丸", "炸芝士三明治", 
                 "炸蘑菇圈", "炸花生米"]
    },
    "快餐": {
        "麦当劳": ["巨无霸", "麦辣鸡腿汉堡", "板烧鸡腿堡", 
                   "麦香鸡", "麦香鱼", "吉士汉堡包", "双层吉士汉堡", 
                   "不素之霸双层牛堡", "双层深海鳕鱼堡", "培根安格斯厚牛堡", 
                   "芝士安格斯厚牛堡", "培根双层安格斯厚牛堡", "芝士双层安格斯厚牛堡", 
                   "培根蔬萃双层牛堡", "酥酥多笋卷"],
     
        "肯德基": ["秘汁全鸡", "薄脆炸全鸡", "黄金SPA鸡排堡", "滋滋YES烤鸡腿堡", 
                  "老北京鸡肉卷", "香辣鸡腿堡", "劲脆鸡腿堡", "新奥尔良烤鸡腿堡", 
                  "吮指原味鸡焖拌饭", "吮指原味鸡", "黄金脆皮鸡"],
     
        "赛百味": ["双芝牛肋三明治", "双芝多肉三明治", "双芝鸡腿排三明治", 
                   "黑胡椒厚切牛排三明治", "金枪鱼三明治", "照烧鸡三明治", 
                   "香烤牛肉三明治", "厚切鸡腿排三明治", "意式经典BMT三明治", 
                   "金玉满堂三明治", "西式火腿三明治", "火鸡胸三明治", 
                   "意式香肠三明治", "缤纷蔬菜三明治"],
     
        "德克士":  ["香酥脆鸡堡", "铁板嫩煎鸡腿堡", "芝士铁板嫩煎鸡腿堡", 
                    "双层香酥脆鸡堡", "檸香脆皮雞腿堡", "椒香脆皮雞腿堡", 
                    "双层铁板嫩煎鸡腿堡", "黄金Q虾堡", "照烧鸡肉米堡", 
                    "XO鲜虾米堡", "照烧鸡腿堡", "菠萝烟熏鸡肉卷", 
                    "山珍鸡肉粥", "黄金脆皮鸡腿饭"],
     
        "必胜客": ["经典意式肉酱面", "香浓奶油培根意面", "香浓黑椒牛肉意面", 
                   "香浓海鲜意面", "香草烤牛排", "香煎黑椒牛排", "香浓肉酱焗饭", 
                   "香浓海鲜焗饭", "香浓鸡肉焗饭", "香浓牛肉焗饭", "经典罗宋汤", 
                   "浓郁番茄汤", "至尊披萨", "香辣披萨", "四季披萨", "意式经典披萨", 
                   "海鲜披萨", "夏威夷披萨", "法式蒜香披萨", "经典焗饭", "双拼焗饭", 
                   "香浓牛肉披萨", "香煎披萨", "烧烤披萨"],
     
        "汉堡王": ["安格斯厚牛堡（原味）", "安格斯厚牛堡（天椒）", "炫辣鸡腿堡", 
                   "脆鸡堡", "双层脆鸡堡（原味）", "双层脆鸡堡（藤椒）", 
                   "小皇堡（原味）", "小皇堡（天椒）", "1层芝士牛堡", 
                   "经典鸡腿堡", "黑椒牛肉堡", "巨无霸汉堡", "大王堡", 
                   "香辣鸡腿堡", "鸡柳堡", "吉士堡", "长条牛堡", 
                   "辣味鸡腿堡", "鳗鱼堡"],
     
        "老乡鸡": ["肥鸡老母汤", "农家蒸蛋", "鱼香肉丝", "梅菜扣肉", 
                   "卤鸡腿", "笋子烧肉", "秘汁卤肉饭", "牛肉面", "酸辣粉"],
     
        "嘉旺": ["猪骨汤", "鸡汤", "牛肉汤", "花生酱拌面", 
                 "酸辣粉", "鸡胸肉盖饭", "叉烧饭", "牛肉盖饭", 
                 "香辣牛肉饭", "砂锅饭", "老母鸡汤面", "鸡排饭", 
                 "烧鸡腿饭", "鸡翅膀饭", "盖浇饭", "豆腐脑", "排骨汤", "猪蹄汤"],
    },
    "零食": {
        "水果": ["苹果", "香蕉", "橙子", "葡萄", "西瓜", 
                 "柚子", "柠檬", "草莓", "蓝莓", "火龙果", 
                 "菠萝", "荔枝", "龙眼", "芒果", "苹果梨", 
                 "梨子", "柿子", "樱桃", "橙子", "葡萄柚", 
                 "番石榴", "龙眼", "桂圆", "沙田柚", "椰子", 
                 "百香果", "杨桃", "荸荠", "油柑", "黄皮", 
                 "莲雾", "释迦果"],
     
        "坚果": ["夏威夷果", "开心果", "腰果", "杏仁", 
                 "榛子", "松子", "花生", "板栗", "黑瓜籽", 
                 "南瓜籽", "红瓜籽", "葵花籽", "碧根果"],
      
        "膨化": ["爆米花", "薯片", "薯条", "薯片卷", "玉米卷",
                 "麦圈", "膨化米饼", "膨化玉米棒", "膨化米条",
                 "膨化豆干", "膨化鱼肉棒", "膨化蔬菜片", "膨化虾片",
                 "膨化饼干", "膨化玉米花", "膨化玉米粒", "膨化紫薯片",
                 "膨化南瓜片", "膨化山药片", "膨化魔芋丝"],
      
        "烘培": ["曲奇饼干", "蛋挞", "肉松小贝", "蔓越莓饼干", 
                 "牛角包", "提子面包", "肉桂卷", "甜甜圈", "麻薯", 
                 "华夫饼", "核桃酥", "绿豆糕", "红豆饼", "榴莲酥", 
                 "椰蓉面包", "奶黄包", "豆沙包", "蛋黄酥", "法棍", 
                 "全麦面包", "苏打饼干", "巧克力曲奇", "核桃包", 
                 "红豆面包", "肉松面包", "肉桂面包", "椰蓉曲奇", 
                 "巧克力面包", "水果派", "蛋挞皮", "蝴蝶酥", "杏仁饼干", 
                 "芝麻饼干", "桃酥", "绿豆冰糕", "红豆沙面包", "枣泥糕", 
                 "红豆沙酥", "绿豆沙酥", "榴莲面包", "巧克力豆沙酥", 
                 "核桃枣泥酥", "巧克力麻薯", "红豆麻薯", "榴莲麻薯", 
                 "巧克力华夫饼", "红豆华夫饼", "榴莲华夫饼", "巧克力法棍", 
                 "红豆法棍", "榴莲法棍", "巧克力全麦面包", "榴莲全麦面包", 
                 "巧克力苏打饼干", "榴莲苏打饼干"],
     
        "卤味": ["卤鸭脖", "卤鸭爪", "卤鸭翅", "卤鸭头", 
                 "卤鸭肠", "卤鸭锁骨", "卤鸡爪", "卤鸡翅", 
                 "卤鸡腿", "卤鸡胗", "卤鸡心", "卤猪蹄", 
                 "卤猪耳", "卤猪尾巴", "卤猪肝", "卤牛肉", 
                 "卤牛肚", "卤牛筋", "卤牛蹄筋", "卤豆干", 
                 "卤海带结", "卤藕片", "卤土豆粉", "卤莲藕", 
                 "卤鹌鹑蛋", "卤鸡蛋", "卤豆腐泡", "卤腐竹", 
                 "卤海带丝", "卤金针菇", "卤藕带", "卤宽粉"],
      
        "奶茶": ["经典珍珠奶茶", "红茶奶茶", "绿茶奶茶", 
                 "乌龙奶茶", "黑糖珍珠奶茶", "奶盖茶", "芝士奶茶", 
                 "抹茶奶茶", "香草奶茶", "椰子奶茶", "葡萄柚奶茶", 
                 "巧克力奶茶", "蜂蜜奶茶", "芒果奶茶", "草莓奶茶", 
                 "柠檬奶茶", "杨枝甘露奶茶", "蜜桃奶茶", "椰果奶茶", 
                 "白桃乌龙奶茶", "柚子奶茶", "芋头奶茶"],
      
        "果茶": ["柠檬茶", "芒果茶", "草莓茶", "蓝莓茶", 
                 "葡萄柚茶", "柚子茶", "百香果茶", "苹果茶", 
                 "橙子茶", "西瓜茶", "桃子茶", "柠檬蜜茶", 
                 "杨枝甘露", "荔枝茶", "火龙果茶", "橙柚茶", 
                 "鲜橙茶", "草莓柠檬茶", "金桔茶", 
                 "菠萝茶", "蜜桃果茶"],
      
        "瓶装饮料": ["可口可乐", "百事可乐", "雪碧", "美年达", "芬达", 
                    "红牛", "脉动", "康师傅冰红茶", "统一绿茶", "农夫山泉", 
                    "怡宝", "王老吉凉茶", "加多宝凉茶", "美汁源果粒橙", 
                    "养乐多", "雀巢咖啡", "三得利乌龙茶", "茶π", 
                    "元气森林气泡水", "维他奶", "椰树椰汁", "露露杏仁露", 
                    "六个核桃", "汇源果汁", "健力宝", "苏打水", "乌龙茶", 
                    "茉莉花茶", "红茶", "绿茶", "青柑普洱", "桂花乌龙", 
                    "黑乌龙", "安吉白茶"]
        }
    }
    with open(DATA_FILE, 'w', encoding='utf-8') as f:
        json.dump(initial_data, f, ensure_ascii=False, indent=4)

# 加载数据
def load_data():
    """加载数据文件，若不存在则初始化"""
    if not os.path.exists(DATA_FILE):  # 检查文件是否存在
        initialize_data()
    with open(DATA_FILE, 'r', encoding='utf-8') as f:
        return json.load(f)

# 随机选择
def random_choice(data, dish=None, category=None):
    """
    从数据中随机选择菜品
    :param data: 数据字典
    :param dish: 指定的菜式（可选）
    :param category: 指定的分类（可选）
    :return: 随机选择的菜品
    """
    if dish and dish in data:  # 如果指定了菜式
        if category and category in data[dish]:  # 如果指定了分类
            return random.choice(data[dish][category])
        if data[dish]:  # 如果菜式有分类
            category = random.choice(list(data[dish].keys()))
            if data[dish][category]:  # 分类下是否有菜品
                return random.choice(data[dish][category])
            else:
                raise ValueError(f"分类 '{category}' 下没有任何菜品。")
        else:
            raise ValueError(f"菜式 '{dish}' 下没有任何分类。")
    if data:  # 随机选择菜式和分类
        dish = random.choice(list(data.keys()))
        if data[dish]:
            category = random.choice(list(data[dish].keys()))
            if data[dish][category]:
                return random.choice(data[dish][category])
            else:
                raise ValueError(f"分类 '{category}' 下没有任何菜品。")
        else:
            raise ValueError(f"菜式 '{dish}' 下没有任何分类。")
    raise ValueError("没有任何有效的数据可供选择。")

# 主程序
def main():
    data = load_data()  # 加载数据

    # 创建主窗口
    root = tk.Tk()
    root.title("今天吃什么？")

    # 获取屏幕宽度和高度，计算窗口居中位置
    screen_width = root.winfo_screenwidth()
    screen_height = root.winfo_screenheight()
    window_width = 400
    window_height = 250
    x = (screen_width - window_width) // 2
    y = (screen_height - window_height) // 2
    root.geometry(f"{window_width}x{window_height}+{x}+{y}")

    # 创建 StringVar 用于存储用户选择
    dish_var = tk.StringVar(value="随机")
    category_var = tk.StringVar(value="随机")

    # 菜式选择和分类选择
    dishes = ["随机"] + list(data.keys())
    categories = ["随机"]

    def update_categories(*args):
        """根据选择的菜式更新分类选项"""
        selected_dish = dish_var.get()
        categories_menu["menu"].delete(0, "end")  # 清空分类选项

        if selected_dish == "随机" or selected_dish not in data:
            categories = ["随机"]
        else:
            categories = list(data[selected_dish].keys()) + ["随机"]

        for cat in categories:
            categories_menu["menu"].add_command(label=cat, command=tk._setit(category_var, cat))
        category_var.set("随机")  # 重置分类选项为随机

    # 推荐菜品的功能
    def recommend():
        """根据用户选择推荐一个菜品"""
        selected_dish = dish_var.get()
        selected_category = category_var.get()

        dish = selected_dish if selected_dish != "随机" else None
        category = selected_category if selected_category != "随机" else None

        try:
            result = random_choice(data, dish, category)  # 随机选择菜品
            result_label["text"] = f"推荐：{result}".upper()
            result_frame.config(bg="lightblue")  # 显示背景颜色
            result_label.config(bg="lightblue", fg="black")
        except ValueError as e:
            messagebox.showerror("错误", str(e))  # 显示错误信息

    # 标题
    title_label = tk.Label(root, text="今天吃什么？", font=("微软雅黑", 18, "bold"))
    title_label.pack(pady=10)

    # 菜式选择 和 分类选择 在同一行
    dish_frame = tk.Frame(root)
    dish_frame.pack(pady=10)

    # 菜式选择
    dish_label = tk.Label(dish_frame, text="选择菜式:", font=("微软雅黑", 12))
    dish_label.grid(row=0, column=0, padx=10, pady=5, sticky="e")
    dish_menu = tk.OptionMenu(dish_frame, dish_var, *dishes)
    dish_menu.config(font=("微软雅黑", 12))
    dish_menu.grid(row=0, column=1, padx=10, pady=5)

    # 分类选择
    category_label = tk.Label(dish_frame, text="选择分类:", font=("微软雅黑", 12))
    category_label.grid(row=0, column=2, padx=10, pady=5, sticky="e")
    categories_menu = tk.OptionMenu(dish_frame, category_var, *categories)
    categories_menu.config(font=("微软雅黑", 12))
    categories_menu.grid(row=0, column=3, padx=10, pady=5)

    # 结果显示框（初始无颜色）
    result_frame = tk.Frame(root, padx=20, pady=10)
    result_frame.pack(pady=10)
    result_label = tk.Label(result_frame, text="", font=("微软雅黑", 14, "bold"), fg="black")
    result_label.pack()

    # 推荐按钮
    tk.Button(root, text="帮我决定！", command=recommend, font=("微软雅黑", 12)).pack(pady=10)

    # 更新分类列表的回调
    dish_var.trace_add("write", update_categories)

    root.mainloop()

if __name__ == "__main__":
    main()
